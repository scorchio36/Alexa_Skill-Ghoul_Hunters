{"ast":null,"code":"const http = require('http');\n\nconst WebSocket = require('isomorphic-ws'); //isomorphic-ws must be used for WS to work in node/browser\n\n\nconst SERVER_PORT = 8080;\nconst wsClient = new WebSocket(\"ws://localhost:8080\"); //let msgRcvdCallback = null;\n\n/* Helper class used to talk to the test server (and eventually the real server).\r\n  This client helper class forms a websockets connection with the test server\r\n  upon creation of the helper class. Messages can be sent once the connection is\r\n  established with the sendMessage function */\n\nclass Client {\n  constructor(messageReceivedCallback) {\n    /* messageReceivedCallback is a function that will be called by the user class\r\n    whenever the client helper receives a WS message.*/\n\n    /* store the reference to the listener provided by GameComponent so that\r\n    it can be called later. I would use the this keyword to just store this\r\n    callback in a local variable, but I was getting an error, so this is a\r\n    workaround for now, since I am short on time.*/\n    //msgRcvdCallback = messageReceivedCallback;\n    // Register WS state handlers with the WS client object\n    wsClient.onerror = this.handleWS_OnError;\n    wsClient.onopen = this.handleWS_onConnect;\n    wsClient.onmessage = this.handleWS_onMessage;\n    wsClient.onclose = this.handleWS_onClose;\n    this.msgRcvdCallback = messageReceivedCallback;\n  } // send a WS message to the test server\n\n\n  sendMessage(message) {\n    this.wsClient.send(message);\n  }\n  /* ===== Websockets Handlers ===== */\n\n\n  handleWS_OnError(error) {\n    console.log(error);\n  }\n\n  handleWS_onConnect(connection) {\n    console.log(\"WS Client connected.\");\n  }\n\n  handleWS_onClose() {\n    console.log(\"WS Client disconnected.\");\n  }\n\n  handleWS_onMessage(message) {\n    this.msgRcvdCallback(message.data);\n  } // This function sends a generic HTTP GET request to my local test server\n  // Params to be added: path and query (object containing query params)\n\n\n  sendGETRequest() {\n    const options = {\n      hostname: 'localhost',\n      port: SERVER_PORT,\n      path: '/',\n      method: 'GET'\n    };\n    const clientGETReq = http.request(options, function (res) {\n      console.log(`STATUS CODE: ${res.statusCode}`);\n    });\n    clientGETReq.on('error', function (err) {\n      console.log('ERROR:' + err);\n    });\n    clientGETReq.end();\n  } // This function sends a generic HTTP POST request to my local test server\n\n\n  sendPOSTRequest(json_payload) {\n    const options = {\n      hostname: 'localhost',\n      port: 8080,\n      path: '/',\n      method: 'POST'\n    };\n    const clientPOSTReq = http.request(options, function (res) {\n      console.log(`STATUS CODE: ${res.statusCode}`);\n      res.on('data', function (data) {\n        process.stdout.write(data);\n      });\n    });\n    clientPOSTReq.write(json_payload);\n    clientPOSTReq.end();\n    clientPOSTReq.on('error', function (err) {\n      console.log('ERROR:' + err);\n    });\n  }\n\n}\n\nexport default Client;","map":{"version":3,"sources":["D:/MyProgramming/ghoul_hunters/Alexa_Skill-Ghoul_Hunters/src/Client.js"],"names":["http","require","WebSocket","SERVER_PORT","wsClient","Client","constructor","messageReceivedCallback","onerror","handleWS_OnError","onopen","handleWS_onConnect","onmessage","handleWS_onMessage","onclose","handleWS_onClose","msgRcvdCallback","sendMessage","message","send","error","console","log","connection","data","sendGETRequest","options","hostname","port","path","method","clientGETReq","request","res","statusCode","on","err","end","sendPOSTRequest","json_payload","clientPOSTReq","process","stdout","write"],"mappings":"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","sourcesContent":["const http = require('http');\r\nconst WebSocket = require('isomorphic-ws'); //isomorphic-ws must be used for WS to work in node/browser\r\nconst SERVER_PORT = 8080;\r\nconst wsClient = new WebSocket(\"ws://localhost:8080\");\r\n\r\n//let msgRcvdCallback = null;\r\n\r\n/* Helper class used to talk to the test server (and eventually the real server).\r\n  This client helper class forms a websockets connection with the test server\r\n  upon creation of the helper class. Messages can be sent once the connection is\r\n  established with the sendMessage function */\r\nclass Client {\r\n\r\n\r\n\r\n  constructor(messageReceivedCallback) {\r\n    /* messageReceivedCallback is a function that will be called by the user class\r\n    whenever the client helper receives a WS message.*/\r\n    /* store the reference to the listener provided by GameComponent so that\r\n    it can be called later. I would use the this keyword to just store this\r\n    callback in a local variable, but I was getting an error, so this is a\r\n    workaround for now, since I am short on time.*/\r\n    //msgRcvdCallback = messageReceivedCallback;\r\n    // Register WS state handlers with the WS client object\r\n    wsClient.onerror = this.handleWS_OnError;\r\n    wsClient.onopen = this.handleWS_onConnect;\r\n    wsClient.onmessage = this.handleWS_onMessage;\r\n    wsClient.onclose = this.handleWS_onClose;\r\n\r\n    this.msgRcvdCallback = messageReceivedCallback;\r\n  }\r\n\r\n  // send a WS message to the test server\r\n  sendMessage(message) {\r\n      this.wsClient.send(message);\r\n  }\r\n\r\n  /* ===== Websockets Handlers ===== */\r\n  handleWS_OnError(error) {\r\n    console.log(error);\r\n  }\r\n\r\n  handleWS_onConnect(connection) {\r\n    console.log(\"WS Client connected.\");\r\n  }\r\n\r\n  handleWS_onClose() {\r\n    console.log(\"WS Client disconnected.\");\r\n  }\r\n\r\n  handleWS_onMessage(message) {\r\n    this.msgRcvdCallback(message.data); \r\n  }\r\n\r\n  // This function sends a generic HTTP GET request to my local test server\r\n  // Params to be added: path and query (object containing query params)\r\n  sendGETRequest() {\r\n\r\n    const options = {\r\n      hostname: 'localhost',\r\n      port: SERVER_PORT,\r\n      path: '/',\r\n      method: 'GET'\r\n    };\r\n\r\n    const clientGETReq = http.request(options, function(res) {\r\n\r\n      console.log(`STATUS CODE: ${res.statusCode}`);\r\n\r\n    });\r\n\r\n    clientGETReq.on('error', function(err) {\r\n      console.log('ERROR:' + err);\r\n    });\r\n\r\n    clientGETReq.end();\r\n\r\n  }\r\n\r\n  // This function sends a generic HTTP POST request to my local test server\r\n  sendPOSTRequest(json_payload) {\r\n\r\n    const options = {\r\n      hostname: 'localhost',\r\n      port: 8080,\r\n      path: '/',\r\n      method: 'POST',\r\n\r\n    };\r\n\r\n    const clientPOSTReq = http.request(options, function(res) {\r\n\r\n      console.log(`STATUS CODE: ${res.statusCode}`);\r\n\r\n      res.on('data', function(data) {\r\n\r\n        process.stdout.write(data);\r\n      });\r\n\r\n    });\r\n\r\n    clientPOSTReq.write(json_payload);\r\n    clientPOSTReq.end();\r\n\r\n    clientPOSTReq.on('error', function(err) {\r\n      console.log('ERROR:' + err);\r\n    });\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\nexport default Client;\r\n"]},"metadata":{},"sourceType":"module"}